!function(a,b){"function"==typeof define&&define.amd?define([],function(){var c=b();return a.LocalStorage=c,c}):a.LocalStorage=b()}(this,function(){var a=[Object,Number,String,Array,Date,Boolean],b=function(a,b){this.name="LocalStorageException",this.message=a,this.value=b};if(!this.localStorage)throw new b("Local storage is not supported by your configuration. Sorry :(");var c=function(a,c){if(!a)throw new b("A LocalStorage instance must have a name");c=c&&c.constructor===Object?c:{};var d=a,e={},f={blockingValidation:!1},g=f;Object.keys(f).forEach(function(a){c.hasOwnProperty(a)&&(g[a]=c[a])}),Object.defineProperty(this,"options",{enumerable:!0,get:function(){return g},set:function(a){if(a.constructor!==Object)throw new b("Cannot set the options property to anything other than an object.");g=a}}),Object.defineProperty(this,"name",{enumerable:!0,get:function(){return d}}),Object.defineProperty(this,"validators",{enumerable:!0,get:function(){return e},set:function(a){if(a.constructor!==Object)throw new b("Cannot set the validators property to anything other than an object. You shouldn't write this property directly anyways!");e=a}})};return c.get=function(a){var b=localStorage.getItem(a);return b&&(b=JSON.parse(b)),b},c.set=function(c,d){if(!d)throw new b("No value has been passed");if(-1===a.indexOf(d.constructor))throw new b("Cannot serialize value",d);localStorage.setItem(c,JSON.stringify(d))},c.remove=function(a){localStorage.removeItem(a)},c.clear=function(){Object.keys(localStorage).forEach(function(a){c.remove(a)})},c.prototype.get=function(a){return c.get(this.name+":"+a)},c.prototype.set=function(a,d,e){if(e&&e.constructor===Function&&!e(d)||!e&&this.validators[a]&&!this.validators[a](d)){if(this.options.blockingValidation===!0)throw new b('Validation failed for key "'+a+'"',d);return!1}return c.set(this.name+":"+a,d),this},c.prototype.remove=function(a){return c.remove(this.name+":"+a),this},c.prototype.all=function(){var a={},b=new RegExp("^"+this.name+":.+$");return Object.keys(localStorage).forEach(function(d){b.test(d)&&(a[d.substr(this.name.length+1)]=c.get(d))}.bind(this)),a},c.prototype.clear=function(){var a=new RegExp("^"+this.name+":.+$");return Object.keys(localStorage).forEach(function(b){a.test(b)&&c.remove(b)}.bind(this)),this},c.prototype.setValidator=function(a,c){if(c.constructor!==Function)throw new b("A validator must be a function!");return this.validators[a]=c,this},c.prototype.clearValidator=function(a){return this.validators[a]&&delete this.validators[a],this},c.prototype.clearValidators=function(){return this.validators={},this},c});